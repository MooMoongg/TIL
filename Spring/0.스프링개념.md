
모델링 -> 추상적인 개념을 현실세계에 뽑아내는것

자바가 가지고 있는 데이터타입과 DB(MySQL, oracle 등)의 데이터타입이 다르다.
자바 : int, boolean, double 등
DB : int, varchar 등

이 데이터타입을 맞추기 위해서 클래스를 통해서 데이터베이스에 있는 테이블을 모델링한다.
데이터베이스 세상에 있는 데이터를 자바 세상의 모델링한다.

ORM -> CRUD 단순 작업을 쉽고 간단하게 만들어줌

---

영속성(persistence) : 어떤 데이터를 영구적으로 저장하게 해줌

컨텍스트(context) : 길동이가 영숙이에게 '난 영숙이 너의 모든 컨텍스트를 가지고 있어'
영숙이의 모든것들을 알고있다라는 의미
컨텍스트라는건 어떤 대상에 대한 모든정보를 가지고 있다는 의미

영속성 컨텍스트 : 만약 내가 동물데이터를 데이터베이스에 저장하려고 할 때, 다이렉트로 데이터베이스에 접근해서 저장하는 것이 아니라
중간에 영속성 컨텍스트라는 것이 있다. 이 영속성 컨텍스트라는 것은 자바가 DB에 데이터를 저장해야되는 모든것들을 알고 있는 애가 영속성 컨텍스트

자바 프로그램에서 데이터베이스에 왔다갔다하는 모든 정보를 이 영속성 컨텍스트가 알고 있다.
그래서 자바는 데이터를 DB에 저장하고 싶으면 영속성컨텍스트에 동물데이터를 던지고 영속성컨텍스트가 이 동물데이터를 다시 DB에 던짐
DB에 저장됨
 
 ---

 JPA는 OOP의 관점에서 모델링을 할 수 있게 해준다.(상속, 컴포지션, 연관관계)

---
springBoot 내장원리

(1)내장 톰캣을 가진다.
톰캣을 따로 설치할 필요없이 바로 실행가능하다.

톰캣 :
소켓의 개념을 알아야함
socket : 운영체제가 가지고 있는것.
소켓통신 : 시간을 잘게 쪼게서 동시에 동작하고 있는것처럼 보임
장점:연결이 계속 이어져있음. 생각보다 부하가 큼(느려짐)

http통신 : Stateless 방식
문서를 전달하는 통신.
html확장자로 만들어진 문서를 필요한 사람에게 제공

---
톰캣
http는 소켓을 이용해서 만들어짐
시스템콜 : 시스템이가 가지고 있는 기능을 콜해서 만들었다고 해서 시스템콜
톰캣과 웹서버 구분
웹서버 : 내가 컴퓨터를 샀다. 그리고 재밌는 동영상들을 3개 가지고 있다.
친구들이 동영상을 공유부탁함. 인터넷 통신을 통해서 동영상 3개를 줄수 있겠니?
이때, 내가 갑, 친구들이 을
웹서버는 갑, 갑은 을이 필요한 데이터를 가지고 있음
을이 갑에게 request(요청)함. request할때는 ip주소를 알아야함
url : 자원을 요청하는 주소
갑은 을에게 response, 갑은 을의 ip주소를 몰라도됨, 요청할 때 응답만 해주면됨
그럼 갑이 웹서버가 됨
연결이 지속되는 소켓이 필요함

웹서버 : 아파치 웹서버(가정)
만약에 을이 요청하는게 .jsp 파일 또는 자바코드파일이라면
아파치는 자바코드를 이해하지 못하기 때문에 자바코드 요청시에 응답을 못함
그래서 톰캣을 연결. 그렇게되면 자바코드를 이해하지못하는 아파치에게 요청이 오면 제어권을 톰캣에게 넘김
톰캣은 .jsp 파일안에 있는 모든 자바코드를 컴파일하고 컴파일이 끝나면 컴파일된 데이터를 .html에 덮어씌움
즉 톰캣이 하는일은 .jsp파일의 자바코드를 컴파일하고 html로 바꿔줌
다시 아파치에게 반환
아파치는 .html을 response

요약
웹브라우저가 요청한 데이터가 html파일이면 웹브라우저에서 응답을 받아서 잘 열리지만
.jsp 파일이면 웹브라우저가 이 .jsp파일을 이해하지 못하기 때문에 내용이 깨져버림
그래서 아파치가 웹브라우저로 요청이 왔는데 .jsp파일을 요청을 하니까 .jsp파일은 웹브라우저가 이해하지 못하니까 톰캣에게 넘기고
톰캣이 .jsp파일을 컴파일해서 html파일로 변환함 -> html파일을 response하면 웹브라우저에서 html을 읽을 수 있음

아파치 : 요청한 파일을 응답해주는것
톰캣 : 요청한 파일중에 자바코드가 요청이되면 컴파일해서 html파일로 번역해서 response

---
(2)서블릿컨테이너
서블릿컨테이너 -> 톰캣

request(요청)을 받을 때 무조건 동작하는것이 아님
정적인 파일(html, css, png 등)을 요청하면 아파치가 실행
요청을 할 때, 자바파일을 요청하게 되면 톰캣이 실행

url : ㅣ-> location 자원에 접근할때 사용하는 주소 요청방식
uri : i->identifier(식별자), 식별자를 통해서 접근하는 방식

특정한 파일요청을 할 수 없다. 요청시에는 무조건 자바를 거쳐야한다.
아파치는 통제권을 톰캣에게 넘김.

클라이언트 요청 (자바관련) -> 서블릿이 만들어져야함 -> 
서블릿 : 자바코드를 가지고 웹을 할 수 있다.
서블릿 컨테이너 : 서블릿을 모아서 컨테이너로 만들어놓은것

---

(3)web.xml
ServletContext의 초기 파라미터
Session의 유효시간 설정
Servlet/JSP에 대한 정의
Servlet/JSP매핑
Mime Type매핑
Welcome File list
Error Pages 처리
리스터/필터설정
보안설정


공부 문서 책 타이핑 생각!
생각 왜 이렇게 만들었을까? 다시 문서나 책읽음 
이 사람이 이걸 왜 만들었을까?

스프링 수많은 기능이 있는데 이 기능을 다 써본사람? 절대 없다..
다 가르킬수 없다.

web.xml -> 아주 큰성
이 큰 성에는 입구가 있고 문지기가 있다. 이 문지기는 스스로 일을 할 수 없다.
관리자가 문지기에게 해야할 일을 적은 문서를 줌
이 문서가 web.xml
ServletContext의 초기 파라미터
암구호는 왈라
a라는 사람이 들어올때 a에게 암구호는 왈라야
몰래 잡입한 사람에게 암구호를 대면 말하지 못함
이게 초기 파라미터
이 초기 파라미터는 한 번 설정해놓으면 어디서든지 동작할 수 있다.

세션의 유효시간
어떤 집에 인증을 통해 들어오는것
session을 3일로 설정, a는 성안에 3일동안 맘껏돌아다니다가 3일 후 추방
성에 더 있고 싶으면 문지기한테 가서 세션을 초기화
몰래들어온 사람은 문지기한테가서 세션을 초기화 시킬 수 없다.

Servlet/JSP에 대한 정의와 매핑
a의 목적지 '나'라는 곳이 목적지라면 문지기가 ~~어떻게 가라고 설명해줌
이게 매핑
내가 요청한 자원, 내가 요청한 location, 식별자가 목적지'나'가 어디라는 것을 알려주고 그쪽으로 정확하게 갈수있도록 도와줌

문지기한테 목적지를 '다'라고 설명하면 문지기는 '다'의 주소는 서울시 강남구 이다라고 가르쳐줌
이게 매핑


Mime Type매핑
a가 성에 들어올 때 쌀을 가지고 옴, 너 mime type이 뭐야라고 물으면 a는 쌀이다라고 답변함
이 말은 문지기가 a에게 너가 가지고 올 데이터 타입이 뭐냐고 묻는거
니가 들고올 데이터가 어떤거야?
아무것도 안들고오면 http get방식을 사용
get방식 -> select 
어떤 것을 가지고 온것이 아니라 어떤것을 가지러온것

문지기는 쌀창고로 보냄 먹을 수 있는 쌀이면 가공을 함(세척, 가공)
내가 들고온 데이터가 뭔지를 알려주는것이 Mime Type 
Mime Type 에 따라 문지기가 어디로 보낼지 알 수 있음. 쌀이면 쌀공장, 물이면 물공장 이런식으로


Welcome File list
아무 이유 없이 온 애들은 일단 광장으로 보내
이 광장이 Welcome File list
관리자가 설정하기 나름


Error Pages
a가 들어오는데 (파)로 보내달라고함
문지기는 파라는 곳은 없다고함
니가 모르는 곳으로 보내달라고하면 에러페이지로 던저


리스너/필터 설정
필터 : a가 들어왔을 때 신분을 확인하는거
a가 B나라라면, 총을 소지하고 있다면 문지기가 추방

리스너 : 고급관리자 집이 성안에 있는데 이집에 사는 양반이 술을 잘먹는 사람이 필요로함
문지기야 술잘먹는사람 찾아내
web.xml에 적혀있는 내용이 너무 많아서 할 수가 없다. 양반아 니가 대신좀해달라
양반이 무슨소리냐 니가 해야지 그러면 리스너를 만들어
리스너 성문에 서서 술잘먹는사람만 특별감시함
새로운 사람이 들어오는것을 보고 있다가 리스너가 술을 먹여보고 문지기야 얘좀 데려갈게
문지기 : 아직 마임타입 검사도 안했고 어디로 가는지도 모르는데 데리고 가면 안된다.
리스너 : 양반이 빨리 데려오래 데려감


보안설정
이상한 사람 들어오면 쫒가보냄


web.xml은 웹서버에 진입을 하면 최초로 도는게 web.xml

